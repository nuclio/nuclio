@startuml
|BulkScheduler|
start
while (should scheduler continue to run?)
    if (Is the queue empty or parallel requests below minimum?) then (yes)
        :Sleep for a duration;
        note left
            This prevents CPU hogging
            and allows other processes to run.
        end note
    else (no)
        :Get items from the most common entry;
        if (Are there enough items and sufficient parallel requests available?) then (yes)
            :Execute the most common entry;
            note left
                This also removes the items from the queue
                and adjusts the available parallel requests.
            end note
        else (no)
        endif
    endif
endwhile
stop
@enduml
